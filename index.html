<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.ru/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <title>Lesson1</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="data.js"></script>
</head>

<body class="p-3 m-0 border-0 bd-example m-0 border-0 bd-example-row bd-example-row-flex-cols">
    <h1 class="mb-3 text-center">Расписание занятий</h1>
    <div class="container">
        <div class="row align-items-start">


        </div>
    </div>

    <script>

        const dataSport = JSON.parse(data);
        const rowEl = document.querySelector('.row');
        let status = false;

        function start() {
            dataSport.forEach(element => {
                const column = document.createElement('div');
                column.classList.add('col', 'text-center');
                const titleMain = document.createElement('h5');
                titleMain.classList.add('mb-3');
                titleMain.textContent = element.title;

                column.innerHTML = `
                <h5 class="mb-3">${element.title}</h5>
                <p><b>Время:</b> ${element.time}</p>
                <p><b>Всего мест:</b> ${element.max}</p>`

                const strongText = document.createElement('b');
                strongText.textContent = 'Осталось:';


                const currentEl = document.createElement('p');
                let currentNumber = parseInt(element.current);
                //              currentEl.textContent = 'Осталось: ' + currentNumber;
                currentEl.innerHTML = `<p><b>Осталось:</b> ${currentNumber}`

                const buttonChange = document.createElement('button');
                buttonChange.classList.add('btn', 'btn-primary');
                buttonChange.type = 'button';
                if (element.max === element.current) {
                    buttonChange.textContent = 'Мест нет';
                    buttonChange.disabled = 'true';
                } else {
                    buttonChange.textContent = 'Записаться';
                }

                rowEl.append(column);
                column.append(currentEl);
                column.append(buttonChange);

                //   const buttonChange = document.querySelector('.btn');
                buttonChange.addEventListener('click', subscribe);

                function subscribe() {
                    if (status === false) {
                        buttonChange.textContent = 'Отменить запись';
                        status = true;
                        // currentEl.textContent = 'Осталось: ' + (currentNumber + 1);
                        currentEl.innerHTML = `<p><b>Осталось:</b> ${currentNumber + 1}`

                    } else {
                        buttonChange.textContent = 'Записаться';
                        status = false;
                        //currentEl.textContent = 'Осталось: ' + (currentNumber);
                        currentEl.innerHTML = `<p><b>Осталось:</b> ${currentNumber}`
                    }
                }
            });

        }

        window.onload = start();

    </script>

</body>

</html>